import{r as i,i as C}from"./react-DpEkHeJY.js";import{u as v,c as E,L as P,a as x,b as d,e as T,d as R,f as z,g as S,w as h}from"./@react-leaflet-CMpEp963.js";import{l as p}from"./leaflet-cgDv5KuR.js";import"./react-dom-DIJaDra_.js";function V(){return v().map}function j({bounds:u,boundsOptions:n,center:e,children:t,className:a,id:m,placeholder:o,style:s,whenReady:r,zoom:l,...L},b){const[M]=i.useState({className:a,id:m,style:s}),[f,w]=i.useState(null),y=i.useRef(void 0);i.useImperativeHandle(b,()=>f?.map??null,[f]);const I=i.useCallback(g=>{if(g!==null&&!y.current){const c=new p.Map(g,L);y.current=c,e!=null&&l!=null?c.setView(e,l):u!=null&&c.fitBounds(u,n),r!=null&&c.whenReady(r),w(E(c))}},[]);i.useEffect(()=>()=>{f?.map.remove()},[f]);const O=f?C.createElement(P,{value:f},t):o??null;return C.createElement("div",{...M,ref:I},O)}const Z=i.forwardRef(j),k=x(function({position:n,...e},t){const a=new p.Marker(n,e);return d(a,T(t,{overlayContainer:a}))},function(n,e,t){e.position!==t.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==t.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==t.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==t.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),q=R(function(n,e){const t=new p.Popup(n,e.overlayContainer);return d(t,e)},function(n,e,{position:t},a){i.useEffect(function(){const{instance:o}=n;function s(l){l.popup===o&&(o.update(),a(!0))}function r(l){l.popup===o&&a(!1)}return e.map.on({popupopen:s,popupclose:r}),e.overlayContainer==null?(t!=null&&o.setLatLng(t),o.openOn(e.map)):e.overlayContainer.bindPopup(o),function(){e.map.off({popupopen:s,popupclose:r}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(o)}},[n,e,a,t])}),A=z(function({url:n,...e},t){const a=new p.TileLayer(n,h(e,t));return d(a,t)},function(n,e,t){S(n,e,t);const{url:a}=e;a!=null&&a!==t.url&&n.setUrl(a)});export{Z as M,q as P,A as T,k as a,V as u};
